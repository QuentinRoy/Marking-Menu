{"version":3,"file":"marking-menu.js","sources":["node_modules/rad2deg/source/index.js","src/utils.js","src/move/pointer-events.js","src/move/linear-drag.js","src/move/long-move.js","src/move/dwelling.js","src/move/draw.js","src/navigation/novice-navigation.js","src/recognizer/find-points.js","src/recognizer/articulation-points.js","src/recognizer/stroke-length.js","src/recognizer/recognize-mm-stroke.js","src/navigation/expert-navigation.js","src/navigation/navigation.js","node_modules/rollup-plugin-pug/dist/runtime.es.js","src/layout/menu.pug","src/layout/menu.js","src/layout/stroke.js","node_modules/raf-throttle/lib/rafThrottle.js","src/layout/connect.js","src/layout/gesture-feedback.js","src/model.js","src/main.js"],"sourcesContent":["module.exports = function (angleInRadians) {\n    // angleInDegree = angleInRadians * (180 / Math.PI)  \n    return angleInRadians * 57.29577951308232\n}\n","import rad2deg from 'rad2deg';\n\n/**\n * @param {number} a the dividend\n * @param {number} n the divisor\n * @return {number} The modulo of `a` over `n` (% is not exactly modulo but remainder).\n */\nexport const mod = (a, n) => ((a % n) + n) % n;\n\n/**\n * @param {number} alpha a first angle (in degrees)\n * @param {number} beta a second angle (in degrees)\n * @return {number} The (signed) delta between the two angles (in degrees).\n */\nexport const deltaAngle = (alpha, beta) => mod(beta - alpha + 180, 360) - 180;\n\n/**\n * Calculate the euclidean distance between two\n * points.\n *\n * @param {List<number>} point1 - The first point\n * @param {List<number>} point2 - The second point\n * @return {number} The distance between the two points.\n */\nexport const dist = (point1, point2) => {\n  const sum = point1.reduce((acc, x1i, i) => {\n    const x2i = point2[i];\n    return acc + (x2i - x1i) ** 2;\n  }, 0);\n  return Math.sqrt(sum);\n};\n\nconst ANGLE_ROUNDING = 10e-8;\n/**\n * @param {number[]} a - The first point.\n * @param {number[]} b - The second point, center of the angle.\n * @param {number[]} c - The third point.\n * @return {number} The angle abc (in degrees) rounded at the 8th decimal.\n */\nexport const angle = (a, b, c) => {\n  const lab = dist(a, b);\n  const lbc = dist(b, c);\n  const lac = dist(a, c);\n  const cos = (lab ** 2 + lbc ** 2 - lac ** 2) / (2 * lab * lbc);\n  // Due to rounding, it can happen than cos ends up being slight > 1 or slightly < -1.\n  // This fixes it.\n  const adjustedCos = Math.max(-1, Math.min(1, cos));\n  const angleABC = rad2deg(Math.acos(adjustedCos));\n  // Round the angle to avoid rounding issues.\n  return Math.round(angleABC / ANGLE_ROUNDING) * ANGLE_ROUNDING;\n};\n\n/**\n * @callback findMaxEntryComp\n * @param {*} item1 - A first item.\n * @param {*} item2 - A second item.\n * @return {number} A positive number if the second item should be ranked higher than the first,\n *                  a negative number if it should be ranked lower and 0 if they should be ranked\n *                  the same.\n */\n\n/**\n * @param {List} list - A list of items.\n * @param {findMaxEntryComp} comp - A function to calculate a value from an item.\n * @return {[index, item]} The found entry.\n */\nexport const findMaxEntry = (list, comp) =>\n  list.slice(0).reduce(\n    (result, item, index) => {\n      if (comp(result[1], item) > 1) return [index, item];\n      return result;\n    },\n    [0, list[0]]\n  );\n\n/**\n * Converts the coordinates of a point in polar coordinates (angle in degrees).\n *\n * @param  {number[]} point - A point.\n * @param  {number[]} [pole=[0, 0]] - The pole of a polar coordinate\n *                                    system\n * @return {{azymuth, radius}} The angle coordinate of the point in the polar\n *                             coordinate system in degrees.\n */\nexport const toPolar = ([px, py], [cx, cy] = [0, 0]) => {\n  const x = px - cx;\n  const y = py - cy;\n  return {\n    azymuth: rad2deg(Math.atan2(y, x)),\n    radius: Math.sqrt(x * x + y * y)\n  };\n};\n\n/**\n * @param  {string} str - A valid html fragment that could be contained in a\n *                      <div>.\n * @param  {Document} [doc=document] - The document to use.\n * @return {HTMLCollection} - The html fragment parsed as an HTML collection.\n *\n * Warning: any content that cannot be directly contained in a div, e.g. <td />\n * will fail.\n */\nexport const strToHTML = (str, doc = document) => {\n  const div = doc.createElement('div');\n  div.innerHTML = str;\n  return div.children;\n};\n","// Create a custom pointer event from a touch event.\nexport const createPEventFromTouchEvent = touchEvt => {\n  const touchList = Array.from(touchEvt.targetTouches);\n  const sumX = touchList.reduce((acc, t) => acc + t.clientX, 0);\n  const sumY = touchList.reduce((acc, t) => acc + t.clientY, 0);\n  const meanX = sumX / touchList.length;\n  const meanY = sumY / touchList.length;\n  return {\n    originalEvent: touchEvt,\n    position: [meanX, meanY],\n    timeStamp: touchEvt.timeStamp\n  };\n};\n\n// Create a custom pointer from a mouse event.\nexport const createPEventFromMouseEvent = mouseEvt => ({\n  originalEvent: mouseEvt,\n  position: [mouseEvt.clientX, mouseEvt.clientY],\n  timeStamp: mouseEvt.timeStamp\n});\n","import { fromEvent, of, merge } from 'rxjs';\nimport {\n  map,\n  takeUntil,\n  publishBehavior,\n  filter,\n  startWith\n} from 'rxjs/operators';\nimport {\n  createPEventFromMouseEvent,\n  createPEventFromTouchEvent\n} from './pointer-events';\n\n// Higher order observable tracking mouse drags.\nexport const mouseDrags = rootDOM =>\n  fromEvent(rootDOM, 'mousedown').pipe(\n    map(downEvt => {\n      // Make sure we include the first mouse down event.\n      const drag$ = merge(of(downEvt), fromEvent(rootDOM, 'mousemove')).pipe(\n        takeUntil(fromEvent(rootDOM, 'mouseup')),\n        // Publish it as a behavior so that any new subscription will\n        // get the last drag position.\n        publishBehavior()\n      );\n      drag$.connect();\n      return drag$;\n    }),\n    map(o => o.pipe(map((...args) => createPEventFromMouseEvent(...args))))\n  );\n\n// Higher order observable tracking touch drags.\nexport const touchDrags = rootDOM =>\n  fromEvent(rootDOM, 'touchstart').pipe(\n    // Menu is supposed to have pointer-events: none so we can safely rely on\n    // targetTouches.\n    filter(evt => evt.targetTouches.length === 1),\n    map(firstEvent => {\n      const drag$ = fromEvent(rootDOM, 'touchmove').pipe(\n        startWith(firstEvent),\n        takeUntil(\n          merge(\n            fromEvent(rootDOM, 'touchend'),\n            fromEvent(rootDOM, 'touchcancel'),\n            fromEvent(rootDOM, 'touchstart')\n          ).pipe(filter(evt => evt.targetTouches.length !== 1))\n        ),\n        publishBehavior()\n      );\n      // FIXME: the line below retains the subscription until next touch end.\n      drag$.connect();\n      return drag$;\n    }),\n    map(o => o.pipe(map(createPEventFromTouchEvent)))\n  );\n\n/**\n * @param {HTMLElement} rootDOM - the DOM element to observe pointer events on.\n * @return {Observable} A higher order observable that drag observables. The sub-observables are\n *                      published as behaviors so that any new subscription immediately get the last\n *                      position.\n * @param {function[]} [dragObsFactories] - factory to use to observe drags.\n */\nconst watchDrags = (rootDOM, dragObsFactories = [touchDrags, mouseDrags]) =>\n  merge(...dragObsFactories.map(f => f(rootDOM)));\n\nexport default watchDrags;\n","import { scan, filter, map } from 'rxjs/operators';\nimport { dist } from '../utils';\n\n/**\n * Filter out small movements out of a drag observable.\n * @param {Observable} drag$ - An observable on drag movements.\n * @param {number} movementsThreshold - The threshold below which movements are considered\n *                                      static.\n * @return {Observable} An observable only emitting on long enough movements.\n */\nexport default (drag$, movementsThreshold = 0) =>\n  drag$.pipe(\n    scan(([prev], cur) => {\n      // Initial value.\n      if (prev == null) return [cur, false];\n\n      // End of drag can never be a long move. Such events aren't supposed to be\n      // emitted by drag observable though.\n      if (cur.type === 'end' || cur.type === 'cancel') return [cur, false];\n\n      // If the distance is still below the threshold, re-emit the previous\n      // event. It will be filtered-out later, but will come back again as\n      // prev on the next scan call.\n      if (dist(prev.position, cur.position) < movementsThreshold)\n        return [prev, false];\n\n      // Otherwise, emit the new event.\n      return [cur, true];\n    }, []),\n    filter(([, pass]) => pass),\n    map(x => x[0])\n  );\n","import { merge } from 'rxjs';\nimport {\n  debounceTime,\n  takeUntil,\n  first,\n  withLatestFrom,\n  last\n} from 'rxjs/operators';\nimport longMoves from './long-move';\n\n/**\n * @param {Observable} drag$ - An observable on drag movements.\n * @param {number} delay - The time (in ms) to wait before considering an absence of movements\n *                         as a dwell.\n * @param {number} [movementsThreshold=0] - The threshold below which movements are considered\n *                                          static.\n * @param {Scheduler} [scheduler] - The scheduler to use for managing the timers that handle the timeout\n * for each value\n * @return {Observable} An observable on dwellings in the movement.\n */\nexport default (drag$, delay, movementsThreshold = 0, scheduler) =>\n  merge(drag$.pipe(first()), longMoves(drag$, movementsThreshold)).pipe(\n    // Emit when no long movements happend for delay time.\n    debounceTime(delay, scheduler),\n    // debounceTime emits the last item when the source observable completes.\n    // We don't want that here so we only take until drag is done.\n    takeUntil(drag$.pipe(last())),\n    // Make sure we do emit the last position.\n    withLatestFrom(drag$, (_, last_) => last_)\n  );\n","import { scan } from 'rxjs/operators';\n\n/**\n * Augment a drag$ observable so that events also include the stroke.\n * @param {Observable} drag$ - An observable of drag movements.\n * @param {List<number[]>} initStroke - Initial stroke.\n * @return {Observable} An observable on the gesture drawing.\n */\nexport default (drag$, { initStroke = [], type = undefined }) => {\n  const typeOpts = type === undefined ? {} : { type };\n  return drag$.pipe(\n    scan(\n      (acc, notification) => ({\n        stroke: [...acc.stroke, notification.position],\n        ...typeOpts,\n        ...notification\n      }),\n      { stroke: initStroke }\n    )\n  );\n};\n","import { merge } from 'rxjs';\nimport {\n  scan,\n  startWith,\n  share,\n  last,\n  map,\n  filter,\n  switchAll,\n  take\n} from 'rxjs/operators';\nimport { toPolar } from '../utils';\nimport { dwellings } from '../move';\n\nexport const noviceMoves = (drag$, menu, { menuCenter, minSelectionDist }) => {\n  // Analyse local movements.\n  const moves$ = drag$.pipe(\n    scan(\n      (last_, n) => {\n        const { azymuth, radius } = toPolar(n.position, menuCenter);\n        const active =\n          radius < minSelectionDist ? null : menu.getNearestChild(azymuth);\n        const type = last_.active === active ? 'move' : 'change';\n        return { active, type, azymuth, radius, ...n };\n      },\n      { active: null }\n    ),\n    startWith({\n      type: 'open',\n      menu,\n      center: menuCenter,\n      timeStamp: performance ? performance.now() : Date.now()\n    }),\n    share()\n  );\n\n  const end$ = moves$.pipe(\n    startWith({}),\n    last(),\n    map(n => ({\n      ...n,\n      type: n.active && n.active.isLeaf() ? 'select' : 'cancel',\n      selection: n.active\n    }))\n  );\n\n  return merge(moves$, end$).pipe(share());\n};\n\nexport const menuSelection = (\n  move$,\n  { subMenuOpeningDelay, movementsThreshold, minMenuSelectionDist }\n) =>\n  // Wait for a pause in the movements.\n  dwellings(move$, subMenuOpeningDelay, movementsThreshold).pipe(\n    // Filter dwellings occurring outside of the selection area.\n    filter(\n      n => n.active && n.radius > minMenuSelectionDist && !n.active.isLeaf()\n    )\n  );\n\nexport const subMenuNavigation = (menuSelection$, drag$, subNav, navOptions) =>\n  menuSelection$.pipe(\n    map(n => subNav(drag$, n.active, { menuCenter: n.position, ...navOptions }))\n  );\n\n/**\n * @param {Observable} drag$ - An observable of drag movements.\n * @param {MMItem} menu - The model of the menu.\n * @param {object} options - Configuration options.\n * @return {Observable} An observable on the menu navigation events.\n */\nconst noviceNavigation = (\n  drag$,\n  menu,\n  {\n    minSelectionDist,\n    minMenuSelectionDist,\n    movementsThreshold,\n    subMenuOpeningDelay,\n    menuCenter,\n    noviceMoves: noviceMoves_ = noviceMoves,\n    menuSelection: menuSelection_ = menuSelection,\n    subMenuNavigation: subMenuNavigation_ = subMenuNavigation\n  }\n) => {\n  // Observe the local navigation.\n  const move$ = noviceMoves_(drag$, menu, {\n    menuCenter,\n    minSelectionDist\n  }).pipe(share());\n\n  // Look for (sub)menu selection.\n  const menuSelection$ = menuSelection_(move$, {\n    subMenuOpeningDelay,\n    movementsThreshold,\n    minMenuSelectionDist\n  });\n\n  // Higher order observable on navigation inside sub-menus.\n  const subMenuNavigation$ = subMenuNavigation_(\n    menuSelection$,\n    drag$,\n    noviceNavigation,\n    {\n      minSelectionDist,\n      minMenuSelectionDist,\n      movementsThreshold,\n      subMenuOpeningDelay,\n      noviceMoves: noviceMoves_,\n      menuSelection: menuSelection_,\n      subMenuNavigation: subMenuNavigation_\n    }\n  );\n\n  // Start with local navigation but switch to the first sub-menu navigation\n  // (if any).\n  return subMenuNavigation$.pipe(\n    take(1),\n    startWith(move$),\n    switchAll()\n  );\n};\n\nexport default noviceNavigation;\n","import { dist, angle } from '../utils';\n\n/**\n * @param {Array.<number[]>} pointList - The list of points.\n * @param {number} minDist - A distance.\n * @param {object} options - Options.\n * @param {number} [options.direction=1] - The direction of the lookup: negative values means\n *                                         descending lookup.\n * @param {number} [options.startIndex] - The index of the first point to investigate inside\n *                                        pointList. If not provided, the lookup will start\n *                                        from the start or the end of pointList depending\n *                                        on `direction`.\n * @param {number[]} [options.refPoint=pointList[startIndex]] - The reference point.\n * @return {number} The index of the first point inside pointList that it at least `minDist` from\n *                  `refPoint`.\n */\nexport const findNextPointFurtherThan = (\n  pointList,\n  minDist,\n  {\n    direction = 1,\n    startIndex = direction > 0 ? 0 : pointList.length - 1,\n    refPoint = pointList[startIndex]\n  } = {}\n) => {\n  const step = direction / Math.abs(direction);\n  const n = pointList.length;\n  for (let i = startIndex; i < n && i >= 0; i += step) {\n    if (dist(refPoint, pointList[i]) >= minDist) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * @param {number[]} pointA - The point a.\n * @param {number[]} pointC - The point b.\n * @param {List.<number[]>} pointList - A list of points.\n * @param {number[]} options - Options.\n * @param {number} [options.startIndex=0] - The index of the first point to investigate inside\n *                                          pointList.\n * @param {number} [options.endIndex=pointList.length - 1] - The index of the first point to\n *                                                           investigate inside pointList.\n * @return {{index, angle}} The index of the point b of pointList that maximizes the angle abc and\n *                          the angle abc.\n */\nexport const findMiddlePointForMinAngle = (\n  pointA,\n  pointC,\n  pointList,\n  { startIndex = 0, endIndex = pointList.length - 1 } = {}\n) => {\n  let minAngle = Infinity;\n  let maxAngleIndex = -1;\n  for (let i = startIndex; i <= endIndex; i += 1) {\n    const thisAngle = angle(pointA, pointList[i], pointC);\n    if (thisAngle < minAngle) {\n      minAngle = thisAngle;\n      maxAngleIndex = i;\n    }\n  }\n  return { index: maxAngleIndex, angle: minAngle };\n};\n","import {\n  findNextPointFurtherThan,\n  findMiddlePointForMinAngle\n} from './find-points';\n\n/**\n * @typedef {number[]} Point\n */\n\n/**\n * A segment.\n * @typedef {Point[2]} Segment\n */\n\n/**\n * @param {Point[]} stroke - The points of a stroke.\n * @param {number} expectedSegmentLength - The expected length of a segment\n *                                         (usually strokeLength / maxMenuDepth).\n * @param {number} angleThreshold - The min angle threshold in a point required for it to be\n *                                  considered an articulation points.\n * @return {Point[]} The list of articulation points.\n */\nconst getStrokeArticulationPoints = (\n  stroke,\n  expectedSegmentLength,\n  angleThreshold\n) => {\n  const n = stroke.length;\n  if (n === 0) return [];\n  const w = expectedSegmentLength * 0.3;\n\n  // Add the first point of the stroke.\n  const articulationPoints = [stroke[0]];\n\n  let ai = 0;\n  let a = stroke[ai];\n  while (ai < n) {\n    const ci = findNextPointFurtherThan(stroke, w, {\n      startIndex: ai + 2,\n      refPoint: a\n    });\n    if (ci < 0) break;\n    const c = stroke[ci];\n    const labi = findNextPointFurtherThan(stroke, w / 8, {\n      startIndex: ai + 1,\n      refPoint: a\n    });\n    const lbci = findNextPointFurtherThan(stroke, w / 8, {\n      startIndex: ci - 1,\n      refPoint: c,\n      direction: -1\n    });\n    const { index: bi, angle: angleABC } = findMiddlePointForMinAngle(\n      a,\n      stroke[ci],\n      stroke,\n      {\n        startIndex: labi,\n        endIndex: lbci\n      }\n    );\n    if (bi > 0 && Math.abs(180 - angleABC) > angleThreshold) {\n      const b = stroke[bi];\n      articulationPoints.push(b);\n      a = b;\n      ai = bi;\n    } else {\n      ai += 1;\n      a = stroke[ai];\n    }\n  }\n\n  // Add the last point of the stroke.\n  articulationPoints.push(stroke[stroke.length - 1]);\n  return articulationPoints;\n};\n\nexport default getStrokeArticulationPoints;\n","import { dist } from '../utils';\n\n/**\n * @param {List<List<number>>} stroke - A stroke.\n * @return {number} The length of the stroke `stroke`.\n */\nexport default stroke =>\n  stroke.reduce(\n    (res, current) => {\n      const prev = res.prev || current;\n      return {\n        prev: current,\n        length: res.length + dist(prev, current)\n      };\n    },\n    { length: 0 }\n  ).length;\n","import rad2deg from 'rad2deg';\nimport getStrokeArticulationPoints from './articulation-points';\nimport { dist, findMaxEntry } from '../utils';\nimport strokeLength from './stroke-length';\n\n/**\n * @param {Point[]} points - A list of points.\n * @return {Segment[]} The list of segments joining the points of `points`.\n */\nexport const pointsToSegments = points =>\n  points.slice(1).reduce(\n    ({ segments, last }, current) => {\n      segments.push([last, current]);\n      return { segments, last: current };\n    },\n    { last: points[0], segments: [] }\n  ).segments;\n\n/**\n * @param {Item} model - The marking menu model.\n * @param {{ angle }[]} segments - A list of segments to walk the model.\n * @param {number} [startIndex=0] - The start index in the angle list.\n * @return {Item} The corresponding item found by walking the model.\n */\nexport const walkMMModel = (model, segments, startIndex = 0) => {\n  if (!model || segments.length === 0 || model.isLeaf()) return null;\n  const item = model.getNearestChild(segments[startIndex].angle);\n  if (startIndex + 1 >= segments.length) {\n    return item;\n  }\n  return walkMMModel(item, segments, startIndex + 1);\n};\n\nexport const segmentAngle = (a, b) =>\n  rad2deg(Math.atan2(b[1] - a[1], b[0] - a[0]));\n\n/**\n * @param {{angle, length}[]} segments - A list of segments.\n * @return {{angle, length}[]} A new list of segments with the longest segments divided in two.\n */\nexport const divideLongestSegment = segments => {\n  const [longestI, longest] = findMaxEntry(\n    segments,\n    (s1, s2) => s2.length - s1.length\n  );\n  return [\n    ...segments.slice(0, longestI),\n    { length: longest.length / 2, angle: longest.angle },\n    { length: longest.length / 2, angle: longest.angle },\n    ...segments.slice(longestI + 1)\n  ];\n};\n\n/**\n * @param {Item} model - The marking menu model.\n * @param {{length, angle}[]} segments - A list of segments.\n * @param {number} [maxDepth=model.getMaxDepth()] - The maximum depth of the item.\n * @return {Item} The selected item.\n */\nexport const findMMItem = (model, segments, maxDepth = model.getMaxDepth()) => {\n  // If there is not segments, there is no selection to find.\n  if (!segments.length) return null;\n  // While we haven't found a leaf item, divide the longest segment and walk the model.\n  let currentSegments = segments;\n  let currentItem = null;\n  while (currentSegments.length <= maxDepth) {\n    currentItem = walkMMModel(model, currentSegments);\n    if (currentItem && currentItem.isLeaf()) return currentItem;\n    currentSegments = divideLongestSegment(currentSegments);\n  }\n  return currentItem;\n};\n\n/**\n * @param {List.<number[]>} stroke - A list of points.\n * @param {Item} model - The marking menu model.\n * @param {object} [options] - Additional options.\n * @param {number} [maxDepth] - The maximum menu depth to walk. If negative,\n * start from the maximum depth of the model.\n * @param {boolean} [requireMenu=false] - Look for a menu item. This\n * works best with a negative value for maxDepth.\n * @param {boolean} [requireLeaf=!requireMenu] - Look for a leaf.\n * @return {Item} The item recognized by the stroke.\n */\nconst recognizeMMStroke = (\n  stroke,\n  model,\n  {\n    maxDepth: maxDepth_ = model.getMaxDepth(),\n    requireMenu = false,\n    requireLeaf = !requireMenu\n  } = {}\n) => {\n  if (requireLeaf && requireMenu) {\n    throw new Error('The result cannot be both a leaf and a menu');\n  }\n  const maxDepth = maxDepth_ < 0 ? model.getMaxDepth() + maxDepth_ : maxDepth_;\n  const maxMenuBreadth = model.getMaxBreadth();\n  const length = strokeLength(stroke);\n  const expectedSegmentLength = length / maxDepth;\n  const sensitivity = 0.75;\n  const angleThreshold = 360 / maxMenuBreadth / 2 / sensitivity;\n  const articulationPoints = getStrokeArticulationPoints(\n    stroke,\n    expectedSegmentLength,\n    angleThreshold\n  );\n  const minSegmentSize = expectedSegmentLength / 3;\n  // Get the segments of the marking menus.\n  const segments = pointsToSegments(articulationPoints)\n    // Change the representation of the segment to include its length.\n    .map(seg => ({ points: seg, length: dist(...seg) }))\n    // Remove the segments that are too small.\n    .filter(seg => seg.length > minSegmentSize)\n    // Change again the representation of the segment to include its length but not its\n    // its points anymore.\n    .map(seg => ({ angle: segmentAngle(...seg.points), length: seg.length }));\n  const item = findMMItem(model, segments, maxDepth);\n  if (requireLeaf) {\n    return item && item.isLeaf() ? item : null;\n  }\n  if (requireMenu) {\n    return item && item.isLeaf() ? item.parent : item;\n  }\n  return item;\n};\n\nexport default recognizeMMStroke;\n","import { merge } from 'rxjs';\nimport { startWith, last, map, share } from 'rxjs/operators';\nimport { draw } from '../move';\nimport recognize from '../recognizer';\n\n/**\n * @param {Observable} drag$ - An observable of drag movements.\n * @param {MMItem} model - The model of the menu.\n * @param {List<number[]>} initStroke - Initial stroke.\n * @return {Observable} An observable on the gesture drawing and recognition.\n */\nexport default (drag$, model, initStroke = []) => {\n  // Observable on gesture drawing.\n  const draw$ = draw(drag$, { initStroke, type: 'draw' }).pipe(share());\n\n  // Track the end of the drawing and attempt to recognize the gesture.\n  const end$ = draw$.pipe(\n    startWith(null),\n    last(),\n    map(e => {\n      if (!e) return { type: 'cancel' };\n      const selection = recognize(e.stroke, model);\n      if (selection) {\n        return { ...e, type: 'select', selection };\n      }\n      return { ...e, type: 'cancel' };\n    })\n  );\n  return merge(draw$, end$);\n};\n","import { race, of } from 'rxjs';\nimport {\n  take,\n  map,\n  skip,\n  startWith,\n  switchAll,\n  mergeMap,\n  exhaustMap\n} from 'rxjs/operators';\nimport noviceNavigation from './novice-navigation';\nimport expertNavigation from './expert-navigation';\nimport { longMoves, dwellings, draw } from '../move';\nimport recognize from '../recognizer';\n\nexport const confirmedNoviceNavigationHOO = (drag$, start, model, options) =>\n  dwellings(drag$, options.noviceDwellingTime, options.movementsThreshold).pipe(\n    take(1),\n    map(() =>\n      (start != null ? of(start) : drag$).pipe(\n        take(1),\n        mergeMap(start_ =>\n          noviceNavigation(\n            // Same as before, skip the first.\n            drag$.pipe(skip(1)),\n            model,\n            { ...options, menuCenter: start_.position }\n          ).pipe(map(n => ({ ...n, mode: 'novice' })))\n        )\n      )\n    )\n  );\n\nexport const expertToNoviceSwitchHOO = (drag$, model, initStroke, options) =>\n  dwellings(\n    draw(drag$, { initStroke }),\n    options.noviceDwellingTime,\n    options.movementsThreshold\n  ).pipe(\n    take(1),\n    map(evt => {\n      // Look for the furthest menu (not leaf).\n      const menu = recognize(evt.stroke, model, {\n        maxDepth: -1,\n        requireMenu: true\n      });\n      if (!menu || menu.isRoot()) {\n        return of({ ...evt, type: 'cancel' });\n      }\n      // Start a novice navigation from there.\n      return noviceNavigation(drag$.pipe(skip(1)), menu, {\n        ...options,\n        menuCenter: evt.position\n      });\n    })\n  );\n\nexport const confirmedExpertNavigationHOO = (\n  drag$,\n  model,\n  {\n    expertToNoviceSwitchHOO: expertToNoviceSwitchHOO_ = expertToNoviceSwitchHOO,\n    ...options\n  } = {}\n) =>\n  longMoves(draw(drag$, { type: 'draw' }), options.movementsThreshold).pipe(\n    take(1),\n    map(e => {\n      const expertNav$ = expertNavigation(\n        // Drag always return the last value when observed, in this case we are\n        // not interested in it as it has already been took into account.\n        drag$.pipe(skip(1)),\n        model,\n        e.stroke\n      ).pipe(map(n => ({ ...n, mode: 'expert' })));\n      return expertToNoviceSwitchHOO_(drag$, model, e.stroke, options).pipe(\n        startWith(expertNav$),\n        switchAll()\n      );\n    })\n  );\n\nexport const startup = (drag$, model) =>\n  expertNavigation(drag$, model).pipe(\n    map((n, i) =>\n      i === 0\n        ? { ...n, type: 'start', mode: 'startup' }\n        : { ...n, mode: 'startup' }\n    )\n  );\n\nexport const navigationFromDrag = (\n  drag$,\n  start,\n  model,\n  options,\n  {\n    confirmedExpertNavigationHOO: confirmedExpertNavigationHOO_ = confirmedExpertNavigationHOO,\n    confirmedNoviceNavigationHOO: confirmedNoviceNavigationHOO_ = confirmedNoviceNavigationHOO,\n    startup: startup_ = startup\n  } = {}\n) => {\n  // Start up observable (while neither expert or novice are confirmed).\n  const startUp$ = startup_(drag$, model);\n\n  // Observable on confirmed expert navigation.\n  const confirmedExpertNavigation$$ = confirmedExpertNavigationHOO_(\n    drag$,\n    model,\n    options\n  );\n\n  // Observable on confirmed novice navigation.\n  const confirmedNoviceNavigation$$ = confirmedNoviceNavigationHOO_(\n    drag$,\n    start,\n    model,\n    options\n  );\n\n  // Observable on expert or novice navigation once confirmed.\n  const confirmedNavigation$$ = race(\n    confirmedExpertNavigation$$,\n    confirmedNoviceNavigation$$\n  );\n\n  // Start with startup navigation (similar to expert) but switch to the\n  // confirmed navigation as soon as it is settled.\n  return confirmedNavigation$$.pipe(\n    startWith(startUp$),\n    switchAll()\n  );\n};\n\n/**\n * @param {Observable} drags$ - A higher order observable on drag movements.\n * @param {MMItem} menu - The model of the menu.\n * @param {object} options - Configuration options (see {@link ../index.js}).\n * @param {function} [navigationFromDrag_] - function to convert a drags higher\n *                                         order observable to a navigation\n *                                         observable.\n * @return {Observable} An observable on the marking menu events.\n */\nexport default (\n  drags$,\n  menu,\n  options,\n  navigationFromDrag_ = navigationFromDrag\n) =>\n  drags$.pipe(\n    exhaustMap(drag$ =>\n      drag$.pipe(\n        take(1),\n        mergeMap(start => navigationFromDrag_(drag$, start, menu, options))\n      )\n    )\n  );\n","export default (function(exports) {\n  'use strict';\n\n  var pug_has_own_property = Object.prototype.hasOwnProperty;\n\n  /**\n   * Merge two attribute objects giving precedence\n   * to values in object `b`. Classes are special-cased\n   * allowing for arrays and merging/joining appropriately\n   * resulting in a string.\n   *\n   * @param {Object} a\n   * @param {Object} b\n   * @return {Object} a\n   * @api private\n   */\n\n  exports.merge = pug_merge;\n  function pug_merge(a, b) {\n    if (arguments.length === 1) {\n      var attrs = a[0];\n      for (var i = 1; i < a.length; i++) {\n        attrs = pug_merge(attrs, a[i]);\n      }\n      return attrs;\n    }\n\n    for (var key in b) {\n      if (key === 'class') {\n        var valA = a[key] || [];\n        a[key] = (Array.isArray(valA) ? valA : [valA]).concat(b[key] || []);\n      } else if (key === 'style') {\n        var valA = pug_style(a[key]);\n        valA = valA && valA[valA.length - 1] !== ';' ? valA + ';' : valA;\n        var valB = pug_style(b[key]);\n        valB = valB && valB[valB.length - 1] !== ';' ? valB + ';' : valB;\n        a[key] = valA + valB;\n      } else {\n        a[key] = b[key];\n      }\n    }\n\n    return a;\n  };\n\n  /**\n   * Process array, object, or string as a string of classes delimited by a space.\n   *\n   * If `val` is an array, all members of it and its subarrays are counted as\n   * classes. If `escaping` is an array, then whether or not the item in `val` is\n   * escaped depends on the corresponding item in `escaping`. If `escaping` is\n   * not an array, no escaping is done.\n   *\n   * If `val` is an object, all the keys whose value is truthy are counted as\n   * classes. No escaping is done.\n   *\n   * If `val` is a string, it is counted as a class. No escaping is done.\n   *\n   * @param {(Array.<string>|Object.<string, boolean>|string)} val\n   * @param {?Array.<string>} escaping\n   * @return {String}\n   */\n  exports.classes = pug_classes;\n  function pug_classes_array(val, escaping) {\n    var classString = '', className, padding = '', escapeEnabled = Array.isArray(escaping);\n    for (var i = 0; i < val.length; i++) {\n      className = pug_classes(val[i]);\n      if (!className) continue;\n      escapeEnabled && escaping[i] && (className = pug_escape(className));\n      classString = classString + padding + className;\n      padding = ' ';\n    }\n    return classString;\n  }\n  function pug_classes_object(val) {\n    var classString = '', padding = '';\n    for (var key in val) {\n      if (key && val[key] && pug_has_own_property.call(val, key)) {\n        classString = classString + padding + key;\n        padding = ' ';\n      }\n    }\n    return classString;\n  }\n  function pug_classes(val, escaping) {\n    if (Array.isArray(val)) {\n      return pug_classes_array(val, escaping);\n    } else if (val && typeof val === 'object') {\n      return pug_classes_object(val);\n    } else {\n      return val || '';\n    }\n  }\n\n  /**\n   * Convert object or string to a string of CSS styles delimited by a semicolon.\n   *\n   * @param {(Object.<string, string>|string)} val\n   * @return {String}\n   */\n\n  exports.style = pug_style;\n  function pug_style(val) {\n    if (!val) return '';\n    if (typeof val === 'object') {\n      var out = '';\n      for (var style in val) {\n        /* istanbul ignore else */\n        if (pug_has_own_property.call(val, style)) {\n          out = out + style + ':' + val[style] + ';';\n        }\n      }\n      return out;\n    } else {\n      return val + '';\n    }\n  };\n\n  /**\n   * Render the given attribute.\n   *\n   * @param {String} key\n   * @param {String} val\n   * @param {Boolean} escaped\n   * @param {Boolean} terse\n   * @return {String}\n   */\n  exports.attr = pug_attr;\n  function pug_attr(key, val, escaped, terse) {\n    if (val === false || val == null || !val && (key === 'class' || key === 'style')) {\n      return '';\n    }\n    if (val === true) {\n      return ' ' + (terse ? key : key + '=\"' + key + '\"');\n    }\n    var type = typeof val;\n    if ((type === 'object' || type === 'function') && typeof val.toJSON === 'function') {\n      val = val.toJSON();\n    }\n    if (typeof val !== 'string') {\n      val = JSON.stringify(val);\n      if (!escaped && val.indexOf('\"') !== -1) {\n        return ' ' + key + '=\\'' + val.replace(/'/g, '&#39;') + '\\'';\n      }\n    }\n    if (escaped) val = pug_escape(val);\n    return ' ' + key + '=\"' + val + '\"';\n  };\n\n  /**\n   * Render the given attributes object.\n   *\n   * @param {Object} obj\n   * @param {Object} terse whether to use HTML5 terse boolean attributes\n   * @return {String}\n   */\n  exports.attrs = pug_attrs;\n  function pug_attrs(obj, terse){\n    var attrs = '';\n\n    for (var key in obj) {\n      if (pug_has_own_property.call(obj, key)) {\n        var val = obj[key];\n\n        if ('class' === key) {\n          val = pug_classes(val);\n          attrs = pug_attr(key, val, false, terse) + attrs;\n          continue;\n        }\n        if ('style' === key) {\n          val = pug_style(val);\n        }\n        attrs += pug_attr(key, val, false, terse);\n      }\n    }\n\n    return attrs;\n  };\n\n  /**\n   * Escape the given string of `html`.\n   *\n   * @param {String} html\n   * @return {String}\n   * @api private\n   */\n\n  var pug_match_html = /[\"&<>]/;\n  exports.escape = pug_escape;\n  function pug_escape(_html){\n    var html = '' + _html;\n    var regexResult = pug_match_html.exec(html);\n    if (!regexResult) return _html;\n\n    var result = '';\n    var i, lastIndex, escape;\n    for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {\n      switch (html.charCodeAt(i)) {\n        case 34: escape = '&quot;'; break;\n        case 38: escape = '&amp;'; break;\n        case 60: escape = '&lt;'; break;\n        case 62: escape = '&gt;'; break;\n        default: continue;\n      }\n      if (lastIndex !== i) result += html.substring(lastIndex, i);\n      lastIndex = i + 1;\n      result += escape;\n    }\n    if (lastIndex !== i) return result + html.substring(lastIndex, i);\n    else return result;\n  };\n\n  /**\n   * Re-throw the given `err` in context to the\n   * the pug in `filename` at the given `lineno`.\n   *\n   * @param {Error} err\n   * @param {String} filename\n   * @param {String} lineno\n   * @param {String} str original source\n   * @api private\n   */\n\n  exports.rethrow = pug_rethrow;\n  function pug_rethrow(err, filename, lineno, str){\n    if (!(err instanceof Error)) throw err;\n    if ((typeof window != 'undefined' || !filename) && !str) {\n      err.message += ' on line ' + lineno;\n      throw err;\n    }\n    try {\n      str = str || require('fs').readFileSync(filename, 'utf8')\n    } catch (ex) {\n      pug_rethrow(err, null, lineno)\n    }\n    var context = 3\n      , lines = str.split('\\n')\n      , start = Math.max(lineno - context, 0)\n      , end = Math.min(lines.length, lineno + context);\n\n    // Error context\n    var context = lines.slice(start, end).map(function(line, i){\n      var curr = i + start + 1;\n      return (curr == lineno ? '  > ' : '    ')\n        + curr\n        + '| '\n        + line;\n    }).join('\\n');\n\n    // Alter exception message\n    err.path = filename;\n    err.message = (filename || 'Pug') + ':' + lineno\n      + '\\n' + context + '\\n\\n' + err.message;\n    throw err;\n  };\n\n  return exports\n})({});\n",".marking-menu(style={ left: `${center[0]}px`, top: `${center[1]}px` })\n  each item in items\n    .marking-menu-item(data-item-id=item.id data-item-angle=item.angle)\n      .marking-menu-line\n      .marking-menu-label=item.name","import template from './menu.pug';\nimport { strToHTML } from '../utils';\nimport './menu.scss';\n\n/**\n * Create the Menu display.\n * @param {HTMLElement} parent - The parent node.\n * @param {ItemModel} model - The model of the menu to open.\n * @param {[int, int]} center - The center of the menu.\n * @param {String} [current] - The currently active item.\n * @param {Document} [options] - Menu options.\n * @param {Document} [options.doc=document] - The root document of the menu.\n *                                            Mostly useful for testing purposes.\n * @return {{ setActive, remove }} - The menu controls.\n */\nconst createMenu = (\n  parent,\n  model,\n  center,\n  current,\n  { doc = document } = {}\n) => {\n  // Create the DOM.\n  const main = strToHTML(template({ items: model.children, center }), doc)[0];\n  parent.appendChild(main);\n\n  // Clear any  active items.\n  const clearActiveItems = () => {\n    Array.from(main.querySelectorAll('.active')).forEach(itemDom =>\n      itemDom.classList.remove('active')\n    );\n  };\n\n  // Return an item DOM element from its id.\n  const getItemDom = itemId =>\n    main.querySelector(`.marking-menu-item[data-item-id=\"${itemId}\"]`);\n\n  // Mark an item as active.\n  const setActive = itemId => {\n    // Clear any  active items.\n    clearActiveItems();\n\n    // Set the active class.\n    if (itemId || itemId === 0) {\n      getItemDom(itemId).classList.add('active');\n    }\n  };\n\n  // Function to remove the menu.\n  const remove = () => parent.removeChild(main);\n\n  // Initialize the menu.\n  if (current) setActive(current);\n\n  // Create the interface.\n  return { setActive, remove };\n};\n\nexport default createMenu;\n","/**\n * @param {HTMLElement} parent - The parent node.\n * @param {Document} options - Options.\n * @param {Document} [options.doc=document] - The root document. Mostly useful for testing purposes.\n * @param {number} [options.lineWidth=2] - The width of the stroke.\n * @param {string} [options.lineColor='black'] - CSS representation of the stroke color.\n * @param {number} [options.startPointRadius=0] - The radius of the start point.\n * @param {number} [options.startPointColor=options.lineColor] - CSS representation of the start\n *                                                               point color.\n * @param {number} [options.ptSize=1 / devicePixelRatio] - The size of the canvas points\n *                                                         (px).\n * @return {{ clear, setStroke, remove }} The canvas methods.\n */\nexport default (\n  parent,\n  {\n    doc = document,\n    lineWidth = 2,\n    lineColor = 'black',\n    pointRadius = 0,\n    pointColor = lineColor,\n    ptSize = window.devicePixelRatio ? 1 / window.devicePixelRatio : 1\n  }\n) => {\n  // Create the canvas.\n  const { width, height } = parent.getBoundingClientRect();\n  const canvas = doc.createElement('canvas');\n  canvas.width = width / ptSize;\n  canvas.height = height / ptSize;\n  Object.assign(canvas.style, {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    width: `${width}px`,\n    height: `${height}px`,\n    'pointer-events': 'none'\n  });\n  parent.appendChild(canvas);\n\n  // Get the canvas' context and set it up\n  const ctx = canvas.getContext('2d');\n  // Scale to the device pixel ratio.\n  ctx.scale(1 / ptSize, 1 / ptSize);\n\n  /**\n   * @param {number[]} point - Position of the point to draw.\n   * @return {undefined}\n   */\n  const drawPoint = ([x, y]) => {\n    ctx.save();\n    ctx.strokeStyle = 'none';\n    ctx.fillStyle = pointColor;\n    ctx.beginPath();\n    ctx.moveTo(x + pointRadius, y);\n    ctx.arc(x, y, pointRadius, 0, 360);\n    ctx.fill();\n    ctx.restore();\n  };\n\n  /**\n   * Clear the canvas.\n   *\n   * @return {undefined}\n   */\n  const clear = () => {\n    ctx.clearRect(0, 0, width, height);\n  };\n\n  /**\n   * Draw the stroke.\n   *\n   * @param {List<number[]>} stroke - The new stroke.\n   * @return {undefined}\n   */\n  const drawStroke = stroke => {\n    ctx.save();\n    ctx.fillStyle = 'none';\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    ctx.strokeStyle = lineColor;\n    ctx.lineWidth = lineWidth;\n    ctx.beginPath();\n    stroke.forEach((point, i) => {\n      if (i === 0) ctx.moveTo(...point);\n      else ctx.lineTo(...point);\n    });\n    ctx.stroke();\n    ctx.restore();\n  };\n\n  /**\n   * Destroy the canvas.\n   * @return {undefined}\n   */\n  const remove = () => {\n    canvas.remove();\n  };\n\n  return { clear, drawStroke, drawPoint, remove };\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar rafThrottle = function rafThrottle(callback) {\n  var requestId = void 0;\n\n  var later = function later(context, args) {\n    return function () {\n      requestId = null;\n      callback.apply(context, args);\n    };\n  };\n\n  var throttled = function throttled() {\n    if (requestId === null || requestId === undefined) {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      requestId = requestAnimationFrame(later(this, args));\n    }\n  };\n\n  throttled.cancel = function () {\n    return cancelAnimationFrame(requestId);\n  };\n\n  return throttled;\n};\n\nexports.default = rafThrottle;","import { finalize, tap } from 'rxjs/operators';\nimport rafThrottle from 'raf-throttle';\n\n/**\n * Connect navigation notifications to menu opening and closing.\n *\n * @param {HTMLElement} parentDOM - The element where to append the menu.\n * @param {Observable} navigation$ - Notifications of the navigation.\n * @param {Function} createMenuLayout - Menu layout factory.\n * @param {Function} createUpperStrokeCanvas - Upper stroke canvas factory. The\n * upper stroke show the user interaction on the current menu, and the movements\n * in expert mode.\n * @param {Function} createLowerStrokeCanvas - Lower stroke canvas factory. The\n * lower stroke is stroke drawn below the menu. It keeps track of the previous\n * movements.\n * @param {Function} createGestureFeedback - Create gesture feedback.\n * @param {{error}} log - Logger.\n * @return {Observable} `navigation$` with menu opening and closing side effects.\n */\nexport default (\n  parentDOM,\n  navigation$,\n  createMenuLayout,\n  createUpperStrokeCanvas,\n  createLowerStrokeCanvas,\n  createGestureFeedback,\n  log\n) => {\n  // The menu object.\n  let menu = null;\n  // A stroke drawn on top of the menu.\n  let upperStrokeCanvas = null;\n  // A stroke drawn below the menu.\n  let lowerStrokeCanvas = null;\n  // The points of the lower strokes.\n  let lowerStroke = null;\n  // The points of the upper stroke.\n  let upperStroke = null;\n\n  const gestureFeedback = createGestureFeedback(parentDOM);\n\n  const closeMenu = () => {\n    menu.remove();\n    menu = null;\n  };\n\n  const openMenu = (model, position) => {\n    const cbr = parentDOM.getBoundingClientRect();\n    menu = createMenuLayout(parentDOM, model, [\n      position[0] - cbr.left,\n      position[1] - cbr.top\n    ]);\n  };\n\n  const setActive = id => {\n    menu.setActive(id);\n  };\n\n  const startUpperStroke = position => {\n    upperStrokeCanvas = createUpperStrokeCanvas(parentDOM);\n    upperStroke = [position];\n    upperStrokeCanvas.drawStroke(upperStroke);\n  };\n\n  const noviceMove = rafThrottle(position => {\n    if (upperStrokeCanvas) {\n      upperStrokeCanvas.clear();\n      if (position) {\n        upperStroke = [upperStroke[0], position];\n        upperStrokeCanvas.drawStroke(upperStroke);\n      }\n      upperStrokeCanvas.drawPoint(upperStroke[0]);\n    }\n  });\n\n  const expertDraw = rafThrottle(stroke => {\n    // FIXME: Not very efficient.\n    if (upperStrokeCanvas) {\n      upperStrokeCanvas.clear();\n      upperStroke = stroke.slice();\n      upperStrokeCanvas.drawStroke(upperStroke);\n    }\n  });\n\n  const clearUpperStroke = () => {\n    upperStrokeCanvas.remove();\n    upperStrokeCanvas = null;\n    upperStroke = null;\n  };\n\n  const swapUpperStroke = () => {\n    lowerStroke = lowerStroke ? [...lowerStroke, ...upperStroke] : upperStroke;\n    clearUpperStroke();\n    lowerStrokeCanvas = lowerStrokeCanvas || createLowerStrokeCanvas(parentDOM);\n    lowerStrokeCanvas.drawStroke(lowerStroke);\n  };\n\n  const clearLowerStroke = () => {\n    if (lowerStrokeCanvas) {\n      lowerStrokeCanvas.remove();\n      lowerStrokeCanvas = null;\n    }\n    lowerStroke = null;\n  };\n\n  const showGestureFeedback = isCanceled => {\n    gestureFeedback.show(\n      lowerStroke ? [...lowerStroke, ...upperStroke] : upperStroke,\n      isCanceled\n    );\n  };\n\n  const cleanUp = () => {\n    // Make sure everything is cleaned upon completion.\n    if (menu) closeMenu();\n    if (upperStrokeCanvas) clearUpperStroke();\n    if (lowerStrokeCanvas) clearLowerStroke();\n    gestureFeedback.remove();\n    // eslint-disable-next-line no-param-reassign\n    parentDOM.style.cursor = '';\n  };\n\n  const onNotification = notification => {\n    switch (notification.type) {\n      case 'open': {\n        // eslint-disable-next-line no-param-reassign\n        parentDOM.style.cursor = 'none';\n        if (menu) closeMenu();\n        swapUpperStroke();\n        openMenu(notification.menu, notification.center);\n        startUpperStroke(notification.center);\n        noviceMove(notification.position);\n        break;\n      }\n      case 'change': {\n        setActive((notification.active && notification.active.id) || null);\n        break;\n      }\n      case 'select':\n      case 'cancel':\n        // eslint-disable-next-line no-param-reassign\n        parentDOM.style.cursor = '';\n        if (menu) closeMenu();\n        showGestureFeedback(notification.type === 'cancel');\n        clearUpperStroke();\n        clearLowerStroke();\n        break;\n      case 'start':\n        // eslint-disable-next-line no-param-reassign\n        parentDOM.style.cursor = 'crosshair';\n        startUpperStroke(notification.position);\n        break;\n      case 'draw':\n        expertDraw(notification.stroke);\n        break;\n      case 'move':\n        noviceMove(notification.position);\n        break;\n      default:\n        throw new Error(\n          `Invalid navigation notification type: ${notification.type}`\n        );\n    }\n  };\n\n  return navigation$.pipe(\n    tap({\n      next(notification) {\n        try {\n          onNotification(notification);\n        } catch (e) {\n          log.error(e);\n          throw e;\n        }\n      },\n      error(e) {\n        log.error(e);\n        throw e;\n      }\n    }),\n    finalize(() => {\n      try {\n        cleanUp();\n      } catch (e) {\n        log.error(e);\n        throw e;\n      }\n    })\n  );\n};\n","import createStrokeCanvas from './stroke';\n\nexport default (\n  parentDOM,\n  { duration, strokeOptions = {}, canceledStrokeOptions = {} }\n) => {\n  let strokeTimeoutEntries = [];\n\n  const show = (stroke, isCanceled = false) => {\n    const canvas = createStrokeCanvas(parentDOM, {\n      ...strokeOptions,\n      ...(isCanceled ? canceledStrokeOptions : {})\n    });\n    canvas.drawStroke(stroke);\n    const timeoutEntry = {\n      canvas,\n      timeout: setTimeout(() => {\n        // Remove the entry from the strokeTimeoutEntries.\n        strokeTimeoutEntries = strokeTimeoutEntries.filter(\n          x => x !== timeoutEntry\n        );\n        // Clear the stroke canvas.\n        canvas.remove();\n      }, duration)\n    };\n    strokeTimeoutEntries.push(timeoutEntry);\n  };\n\n  const remove = () => {\n    strokeTimeoutEntries.forEach(({ timeout, canvas }) => {\n      clearTimeout(timeout);\n      canvas.remove();\n    });\n    strokeTimeoutEntries = [];\n  };\n\n  return { show, remove };\n};\n","import { deltaAngle } from './utils';\n\nconst getAngleRange = items => (items.length > 4 ? 45 : 90);\n\n/**\n * Represents an item of the Marking Menu.\n */\nexport class MMItem {\n  /**\n   * @param {String} id - The item's id. Required except for the root item.\n   * @param {String} name - The item's name. Required except for the root item.\n   * @param {Integer} angle - The item's angle. Required except for the root item.\n   * @param {object} [options] - Some additional options.\n   * @param {ItemModel} [options.parent] - The parent menu of the item.\n   * @param {List<ItemModel>} [options.children] - The children of the item menu.\n   */\n  constructor(id, name, angle, { parent, children } = {}) {\n    this.id = id;\n    this.name = name;\n    this.angle = angle;\n    this.children = children;\n    this.parent = parent;\n  }\n\n  isLeaf() {\n    return !this.children || this.children.length === 0;\n  }\n\n  isRoot() {\n    return !this.parent;\n  }\n\n  /**\n   * @param {String} childId - The identifier of the child to look for.\n   * @return {Item} the children with the id `childId`.\n   */\n  getChild(childId) {\n    return this.children.find(child => child.id === childId);\n  }\n\n  /**\n   * @param {String} childName - The name of the children to look for.\n   * @return {Item} the children with the name `childName`.\n   */\n  getChildrenByName(childName) {\n    return this.children.filter(child => child.name === childName);\n  }\n\n  /**\n   * @param {Integer} angle - An angle.\n   * @return {Item} the closest children to the angle `angle`.\n   */\n  getNearestChild(angle) {\n    return this.children.reduce((c1, c2) => {\n      const delta1 = Math.abs(deltaAngle(c1.angle, angle));\n      const delta2 = Math.abs(deltaAngle(c2.angle, angle));\n      return delta1 > delta2 ? c2 : c1;\n    });\n  }\n\n  /**\n   * @return {number} The maximum depth of the menu.\n   */\n  getMaxDepth() {\n    return this.isLeaf()\n      ? 0\n      : Math.max(0, ...this.children.map(child => child.getMaxDepth())) + 1;\n  }\n\n  /**\n   * @return {number} The maximum breadth of the menu.\n   */\n  getMaxBreadth() {\n    return this.isLeaf()\n      ? 0\n      : Math.max(\n          this.children.length,\n          ...this.children.map(child => child.getMaxBreadth())\n        );\n  }\n}\n\n// Create the model item from a list of items.\nconst recursivelyCreateModelItems = (\n  items,\n  baseId = undefined,\n  parent = undefined\n) => {\n  // Calculate the angle range for each items.\n  const angleRange = getAngleRange(items);\n  // Create the list of model items (frozen).\n  return Object.freeze(\n    items.map((item, i) => {\n      // Standard item id.\n      const stdId = baseId ? [baseId, i].join('-') : i.toString();\n      // Create the item.\n      const mmItem = new MMItem(\n        item.id == null ? stdId : item.id,\n        typeof item === 'string' ? item : item.name,\n        i * angleRange,\n        { parent }\n      );\n      // Add its children if any.\n      if (item.children) {\n        mmItem.children = recursivelyCreateModelItems(\n          item.children,\n          stdId,\n          mmItem\n        );\n      }\n      // Return it frozen.\n      return Object.freeze(mmItem);\n    })\n  );\n};\n\n/**\n * Create the marking menu model.\n *\n * @param {List<String|{name,children}>} itemList - The list of items.\n * @return {MMItem} - The root item of the model.\n */\nconst createModel = itemList => {\n  const menu = new MMItem(null, null, null);\n  menu.children = recursivelyCreateModelItems(itemList, undefined, menu);\n  return Object.freeze(menu);\n};\n\nexport default createModel;\n","import { tap, map, share, filter, pluck } from 'rxjs/operators';\nimport navigation from './navigation';\nimport {\n  createMenuLayout,\n  createStrokeCanvas,\n  connectLayout,\n  createGestureFeedback\n} from './layout';\nimport createModel from './model';\nimport { watchDrags } from './move';\n\n// Clone a notification in a protected way so that the internal state cannot be corrupted.\nexport const exportNotification = n => ({\n  type: n.type,\n  mode: n.mode,\n  position: n.position ? n.position.slice() : undefined,\n  active: n.active,\n  selection: n.selection,\n  menuCenter: n.center ? n.center.slice() : undefined,\n  timeStamp: n.timeStamp\n});\n\n/**\n * Create a Marking Menu.\n *\n * @param {List<String|{name,children}>} items - The list of items.\n * @param {HTMLElement} parentDOM - The parent node.\n * @param {Object} [options] - Configuration options for the menu.\n * @param {number} [options.minSelectionDist] - The minimum distance from the center to select an\n *                                              item.\n * @param {number} [options.minMenuSelectionDist] - The minimum distance from the center to open a\n *                                                  sub-menu.\n * @param {number} [options.subMenuOpeningDelay] - The dwelling delay before opening a sub-menu.\n * @param {number} [options.movementsThreshold] - The minimum distance between two points to be\n *                                                considered a significant movements and breaking\n *                                                the sub-menu dwelling delay.\n * @param {number} [options.noviceDwellingTime] - The dwelling time required to trigger the novice\n *                                                mode (and open the menu).\n * @param {number} [options.strokeColor] - The color of the gesture stroke.\n * @param {number} [options.strokeWidth] - The width of the gesture stroke.\n * @param {number} [options.strokeStartPointRadius] - The radius of the start point of the stroke\n *                                                    (appearing at the middle of the menu in novice\n *                                                    mode).\n * @param {number} [options.lowerStrokeColor] - The color of the lower stroke. The lower stroke is\n *                                              the stroke drawn below the menu. It keeps track of\n *                                              the previous movements.\n * @param {number} [options.lowerStrokeWidth] - The width of the lower stroke.\n * @param {number} [options.lowerStrokeStartPointRadius] - The radius of the start point of the\n *                                                         stroke.\n * @param {number} [options.gestureFeedbackStrokeWidth] - The width of the stroke of the gesture\n *                                                        feedback.\n * @param {number} [options.gestureFeedbackStrokeColor] - The color of the stroke of the gesture\n *                                                        feedback.\n * @param {number} [options.gestureFeedbackCanceledStrokeColor] - The color of the stroke of the\n *                                                        gesture feedback when the selection is\n *                                                        canceled.\n * @param {number} [options.gestureFeedbackDuration] - The duration of the gesture feedback.\n * @param {boolean} [options.notifySteps] - If true, every steps of the marking menu (include move)\n *                                          events, will be notified. Useful for logging.\n * @param {{error, info, warn, debug}} [options.log] - Override the default logger to use.\n * @return {Observable} An observable on menu selections.\n */\nexport default (\n  items,\n  parentDOM,\n  {\n    minSelectionDist = 40,\n    minMenuSelectionDist = 80,\n    subMenuOpeningDelay = 25,\n    movementsThreshold = 5,\n    noviceDwellingTime = 1000 / 3,\n    strokeColor = '#000',\n    strokeWidth = 4,\n    strokeStartPointRadius = 8,\n    lowerStrokeColor = '#777',\n    lowerStrokeWidth = strokeWidth,\n    lowerStrokeStartPointRadius = lowerStrokeWidth,\n    gestureFeedbackDuration = 1000,\n    gestureFeedbackStrokeWidth = strokeWidth,\n    gestureFeedbackCanceledStrokeColor = '#DE6C52',\n    gestureFeedbackStrokeColor = strokeColor,\n    notifySteps = false,\n    log = {\n      // eslint-disable-next-line no-console\n      error: console.error && console.error.bind(console),\n      // eslint-disable-next-line no-console\n      info: console.info && console.info.bind(console),\n      // eslint-disable-next-line no-console\n      warn: console.warn && console.warn.bind(console),\n      debug() {}\n    }\n  } = {}\n) => {\n  // Create the display options\n  const menuLayoutOptions = {};\n  const strokeCanvasOptions = {\n    lineColor: strokeColor,\n    lineWidth: strokeWidth,\n    pointRadius: strokeStartPointRadius\n  };\n  const lowerStrokeCanvasOptions = {\n    lineColor: lowerStrokeColor,\n    lineWidth: lowerStrokeWidth,\n    pointRadius: lowerStrokeStartPointRadius\n  };\n  const gestureFeedbackOptions = {\n    duration: gestureFeedbackDuration,\n    strokeOptions: {\n      lineColor: gestureFeedbackStrokeColor,\n      lineWidth: gestureFeedbackStrokeWidth\n    },\n    canceledStrokeOptions: {\n      lineColor: gestureFeedbackCanceledStrokeColor\n    }\n  };\n\n  // Create model and navigation observable.\n  const model = createModel(items);\n  const navigation$ = navigation(watchDrags(parentDOM), model, {\n    minSelectionDist,\n    minMenuSelectionDist,\n    subMenuOpeningDelay,\n    movementsThreshold,\n    noviceDwellingTime\n  }).pipe(\n    tap(({ originalEvent }) => {\n      // Prevent default on every notifications.\n      if (originalEvent) originalEvent.preventDefault();\n    })\n  );\n\n  // Connect the engine's notifications to menu opening/closing.\n  const connectedNavigation$ = connectLayout(\n    parentDOM,\n    navigation$,\n    (parent, menuModel, center, current) =>\n      createMenuLayout(parent, menuModel, center, current, menuLayoutOptions),\n    parent => createStrokeCanvas(parent, strokeCanvasOptions),\n    parent => createStrokeCanvas(parent, lowerStrokeCanvasOptions),\n    parent => createGestureFeedback(parent, gestureFeedbackOptions),\n    log\n  );\n\n  // If every steps should be notified, just export connectedNavigation$.\n  if (notifySteps) {\n    return connectedNavigation$.pipe(\n      map(exportNotification),\n      share()\n    );\n  }\n  // Else, return an observable on the selections.\n  return connectedNavigation$.pipe(\n    filter(notification => notification.type === 'select'),\n    pluck('selection'),\n    share()\n  );\n};\n"],"names":["mod","a","n","deltaAngle","alpha","beta","dist","point1","point2","sum","reduce","acc","x1i","i","x2i","Math","sqrt","ANGLE_ROUNDING","angle","b","c","lab","lbc","lac","cos","adjustedCos","max","min","angleABC","rad2deg","acos","round","findMaxEntry","list","comp","slice","result","item","index","toPolar","px","py","cx","cy","x","y","azymuth","atan2","radius","strToHTML","str","doc","document","div","createElement","innerHTML","children","createPEventFromTouchEvent","touchEvt","touchList","Array","from","targetTouches","sumX","t","clientX","sumY","clientY","meanX","length","meanY","originalEvent","position","timeStamp","createPEventFromMouseEvent","mouseEvt","mouseDrags","rootDOM","fromEvent","pipe","map","downEvt","drag$","merge","of","takeUntil","publishBehavior","connect","o","touchDrags","filter","evt","firstEvent","startWith","watchDrags","dragObsFactories","f","movementsThreshold","scan","cur","prev","type","pass","delay","scheduler","first","longMoves","debounceTime","last","withLatestFrom","_","last_","initStroke","undefined","typeOpts","notification","stroke","noviceMoves","menu","menuCenter","minSelectionDist","moves$","active","getNearestChild","center","performance","now","Date","share","end$","isLeaf","selection","menuSelection","move$","subMenuOpeningDelay","minMenuSelectionDist","dwellings","subMenuNavigation","menuSelection$","subNav","navOptions","noviceNavigation","noviceMoves_","menuSelection_","subMenuNavigation_","subMenuNavigation$","take","switchAll","findNextPointFurtherThan","pointList","minDist","direction","startIndex","refPoint","step","abs","findMiddlePointForMinAngle","pointA","pointC","endIndex","minAngle","Infinity","maxAngleIndex","thisAngle","getStrokeArticulationPoints","expectedSegmentLength","angleThreshold","w","articulationPoints","ai","ci","labi","lbci","bi","push","res","current","pointsToSegments","points","segments","walkMMModel","model","segmentAngle","divideLongestSegment","s1","s2","longestI","longest","findMMItem","maxDepth","getMaxDepth","currentSegments","currentItem","recognizeMMStroke","maxDepth_","requireMenu","requireLeaf","Error","maxMenuBreadth","getMaxBreadth","strokeLength","sensitivity","minSegmentSize","seg","parent","draw$","draw","e","recognize","confirmedNoviceNavigationHOO","start","options","noviceDwellingTime","mergeMap","start_","skip","mode","expertToNoviceSwitchHOO","isRoot","confirmedExpertNavigationHOO","expertToNoviceSwitchHOO_","expertNav$","expertNavigation","startup","navigationFromDrag","confirmedExpertNavigationHOO_","confirmedNoviceNavigationHOO_","startup_","startUp$","confirmedExpertNavigation$$","confirmedNoviceNavigation$$","confirmedNavigation$$","race","drags$","navigationFromDrag_","exhaustMap","createMenu","main","template","items","appendChild","clearActiveItems","querySelectorAll","forEach","itemDom","classList","remove","getItemDom","itemId","querySelector","setActive","add","removeChild","lineWidth","lineColor","pointRadius","pointColor","ptSize","window","devicePixelRatio","getBoundingClientRect","width","height","canvas","Object","assign","style","left","top","ctx","getContext","scale","drawPoint","save","strokeStyle","fillStyle","beginPath","moveTo","arc","fill","restore","clear","clearRect","drawStroke","lineJoin","lineCap","point","lineTo","parentDOM","navigation$","createMenuLayout","createUpperStrokeCanvas","createLowerStrokeCanvas","createGestureFeedback","log","upperStrokeCanvas","lowerStrokeCanvas","lowerStroke","upperStroke","gestureFeedback","closeMenu","openMenu","cbr","id","startUpperStroke","noviceMove","rafThrottle","expertDraw","clearUpperStroke","swapUpperStroke","clearLowerStroke","showGestureFeedback","isCanceled","show","cleanUp","cursor","onNotification","tap","next","error","finalize","duration","strokeOptions","canceledStrokeOptions","strokeTimeoutEntries","createStrokeCanvas","timeoutEntry","timeout","setTimeout","clearTimeout","getAngleRange","MMItem","name","getChild","childId","find","child","getChildrenByName","childName","c1","c2","delta1","delta2","recursivelyCreateModelItems","baseId","angleRange","freeze","stdId","join","toString","mmItem","createModel","itemList","exportNotification","strokeColor","strokeWidth","strokeStartPointRadius","lowerStrokeColor","lowerStrokeWidth","lowerStrokeStartPointRadius","gestureFeedbackDuration","gestureFeedbackStrokeWidth","gestureFeedbackCanceledStrokeColor","gestureFeedbackStrokeColor","notifySteps","console","bind","info","warn","debug","menuLayoutOptions","strokeCanvasOptions","lowerStrokeCanvasOptions","gestureFeedbackOptions","navigation","preventDefault","connectedNavigation$","connectLayout","menuModel","pluck"],"mappings":"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"}